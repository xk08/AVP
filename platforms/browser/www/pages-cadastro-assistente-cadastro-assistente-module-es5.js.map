{"version":3,"sources":["./src/app/pages/cadastro-assistente/cadastro-assistente.page.html","./src/app/pages/cadastro-assistente/cadastro-assistente.module.ts","./src/app/pages/cadastro-assistente/cadastro-assistente.page.scss","./src/app/pages/cadastro-assistente/cadastro-assistente.page.ts","./src/app/services/assistenteCadastro/assistente-cadastro.service.ts"],"names":[],"mappings":"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","file":"pages-cadastro-assistente-cadastro-assistente-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"dark\\\">\\n      <ion-back-button defaultHref=\\\"login\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Personalize seu assistente</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-grid>\\n      <form #form=\\\"ngForm\\\">\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item>\\n              <ion-input\\n                required\\n                name=\\\"apelido\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"Escolha um 'apelido' \\\"\\n                [(ngModel)]='todas.apelido'\\n              ></ion-input>\\n            </ion-item>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\">\\n            <ion-list>\\n              <ion-grid fixed>\\n\\n                <ion-col size=\\\"12\\\">\\n\\n                  <ion-item (click)=\\\"abrirGaleria()\\\">\\n                    <ion-icon\\n                      name=\\\"add\\\"\\n                      color=\\\"primary\\\"\\n                      slot=\\\"start\\\"\\n                    ></ion-icon>\\n                    Clique para escolher\\n                  </ion-item>\\n\\n                </ion-col>\\n              </ion-grid>\\n            </ion-list>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\">\\n            <ion-button\\n              expand=\\\"full\\\"\\n              (click)=\\\"saveTodo()\\\"\\n              [disabled]=\\\"!form.form.valid\\\"\\n            >\\n              Salvar\\n            </ion-button>\\n          </ion-col>\\n        </ion-row>\\n      </form>\\n    </ion-grid>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CadastroAssistentePage } from './cadastro-assistente.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CadastroAssistentePage\n  }\n];\n\n@NgModule({\n  imports: [SharedModule, RouterModule.forChild(routes)],\n  declarations: [CadastroAssistentePage]\n})\nexport class CadastroAssistentePageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NhZGFzdHJvLWFzc2lzdGVudGUvY2FkYXN0cm8tYXNzaXN0ZW50ZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { AssistenteCadastro } from 'src/app/services/assistenteCadastro/assistenteCadastro';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingController, NavController, Platform } from '@ionic/angular';\nimport { AssistenteCadastroService } from 'src/app/services/assistenteCadastro/assistente-cadastro.service';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { StorageService } from 'src/app/services/storage/storage.service';\nimport { File } from '@ionic-native/file/ngx';\nimport { NgForm } from '@angular/forms';\n\n@Component({\n  selector: 'app-cadastro-assistente',\n  templateUrl: './cadastro-assistente.page.html',\n  styleUrls: ['./cadastro-assistente.page.scss']\n})\nexport class CadastroAssistentePage implements OnInit {\n  @ViewChild('form', null) form: NgForm;\n  public idAssistenteCadastro: string;\n  public todas: AssistenteCadastro = {\n    //os dados que estão sendo mantidos\n    apelido: '',\n    icone: ''\n  };\n  private blob: Blob;\n\n  constructor(\n    private route: ActivatedRoute,\n    private loadingController: LoadingController,\n    private assistenteCadastroService: AssistenteCadastroService,\n    private navCtrl: NavController,\n    private camera: Camera,\n    private platform: Platform,\n    private file: File,\n    private storageService: StorageService\n  ) {}\n\n  ngOnInit() {\n    this.idAssistenteCadastro = this.route.snapshot.params['apelido']; // Why ?\n    if (this.idAssistenteCadastro) {\n      this.loadTodo();\n    }\n  }\n\n  async loadTodo() {\n    const loading = await this.loadingController.create({\n      message: 'Carregando Categoria...'\n    });\n    await loading.present();\n\n    this.assistenteCadastroService.getTodo(this.idAssistenteCadastro).subscribe(res => {\n      loading.dismiss();\n      this.todas = res;\n    });\n  }\n\n  async saveTodo() {\n    const loading = await this.loadingController.create({\n      message: 'Salvando os Dados do Assistente'\n    });\n    await loading.present();\n\n    if (this.idAssistenteCadastro) {\n      /* TESTA SE JA EXISTE, ENTÃO FAZ UPDATE */\n      this.assistenteCadastroService.updateTodo(this.todas, this.idAssistenteCadastro).then(() => {\n        loading.dismiss();\n        this.navCtrl.navigateBack('/menu/home');\n      });\n    } else {\n      /* SENÃO EXISTIR, FAZ CADASTRO DE NOVOS DADOS */\n      this.assistenteCadastroService.addTodo(this.todas).then(() => {\n        loading.dismiss();\n        this.navCtrl.navigateBack('/menu/home');\n      });\n    }\n  }\n\n  async abrirGaleria() {\n    const opcao: CameraOptions = {\n      quality: 30,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      correctOrientation: true\n    };\n\n    try {\n      const fileUrl: string = await this.camera.getPicture(opcao);\n\n      let file: string;\n\n      if (this.platform.is('ios')) {\n        //IOS RETORNA IMG_23456789.jpg\n        file = fileUrl.split('/').pop();\n      } else {\n        //ANDROID RETORNA IMG_23456.jpg?23456789 SENDO ASSIM O TRATAMENTO É DIFERENTE\n        file = fileUrl.substring(fileUrl.lastIndexOf('/') + 1, fileUrl.indexOf('?'));\n      }\n\n      const path: string = fileUrl.substring(0, fileUrl.lastIndexOf('/'));\n\n      //LE A IMAGEM COMO UM ARQUIVO BINÁRIO\n      const buffer: ArrayBuffer = await this.file.readAsArrayBuffer(path, file);\n      this.blob = new Blob([buffer], { type: 'image/jpg' });\n      this.storageService\n        .uploadImagemAssistenteCadastro(this.todas.apelido, this.blob)\n        .subscribe(res => {\n          this.todas.icone = res;\n        });\n    } catch (error) {}\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestoreCollection, AngularFirestore } from 'angularfire2/firestore';\nimport { AssistenteCadastro } from './assistenteCadastro';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AssistenteCadastroService {\n  private todosCollection: AngularFirestoreCollection<AssistenteCadastro>;\n\n  constructor(db: AngularFirestore) {\n    this.todosCollection = db.collection<AssistenteCadastro>('AssistenteCadastro');\n  }\n\n  getTodos() {\n    return this.todosCollection.snapshotChanges().pipe(\n      map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return { id, ...data };\n        });\n      })\n    );\n  }\n\n  getTodo(id) {\n    return this.todosCollection.doc<AssistenteCadastro>(id).valueChanges();\n  }\n\n  updateTodo(toda: AssistenteCadastro, id: string) {\n    return this.todosCollection.doc(id).update(toda);\n  }\n\n  addTodo(toda: AssistenteCadastro) {\n    return this.todosCollection.add(toda);\n  }\n\n  removeTodo(id) {\n    return this.todosCollection.doc(id).delete();\n  }\n}\n"],"sourceRoot":""}